<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Happy Birthday Arooj! üíñ</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* === CSS VARIABLES === */
        :root {
            --primary: #b71c1c;
            --secondary: #fdd835;
            --accent: #d81b60;
            --light: #fff8e1;
            --dark: #3e2723;
            --glass: rgba(255, 255, 255, 0.95);
            --shadow: 0 8px 32px rgba(183, 28, 28, 0.2);
        }

        /* === RESET & BASE === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            touch-action: manipulation;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #fffde7 0%, #fff9c4 50%, #f8bbd0 100%);
            color: var(--dark);
            min-height: 100vh;
            min-height: -webkit-fill-available;
            position: relative;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        /* Fix for iOS Safari 100vh */
        @supports (-webkit-touch-callout: none) {
            body {
                min-height: -webkit-fill-available;
            }
        }

        /* === ANIMATIONS === */
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes confetti {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            14% { transform: scale(1.1); }
            28% { transform: scale(1); }
            42% { transform: scale(1.1); }
            70% { transform: scale(1); }
        }

        /* === BACKGROUND ELEMENTS === */
        .bg-element {
            position: fixed;
            font-size: 24px;
            color: var(--accent);
            opacity: 0.3;
            animation: float 6s infinite ease-in-out;
            z-index: 0;
            pointer-events: none;
        }

        /* === CONTAINER & SECTIONS === */
        .container {
            width: 95%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
            position: relative;
            z-index: 1;
        }

        section {
            padding: 40px 0;
            position: relative;
            min-height: auto;
        }

        /* === HERO SECTION === */
        #hero {
            min-height: 100vh;
            min-height: -webkit-fill-available;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px 15px;
            animation: fadeIn 1s ease-out;
        }

        .profile-img {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            border: 5px solid var(--light);
            box-shadow: var(--shadow);
            animation: pulse 2s infinite;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }

        .profile-img::before {
            content: "Aüíñ";
            font-size: 70px;
            color: white;
            font-family: 'Dancing Script', cursive;
        }

        .main-title {
            font-family: 'Dancing Script', cursive;
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            line-height: 1.2;
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--accent);
            margin-bottom: 20px;
            font-weight: 600;
        }

        .message-box {
            background: var(--glass);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin: 20px auto;
            max-width: 600px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(183, 28, 28, 0.2);
            animation: fadeIn 1s ease-out 0.3s both;
        }

        /* === BUTTONS === */
        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 25px;
            width: 100%;
            max-width: 320px;
        }

        .btn {
            padding: 16px 25px;
            border: none;
            border-radius: 50px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            min-height: 56px;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            position: relative;
            overflow: hidden;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary), var(--accent));
            color: white;
            box-shadow: 0 4px 15px rgba(183, 28, 28, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(45deg, var(--secondary), #ffcc80);
            color: var(--dark);
            box-shadow: 0 4px 15px rgba(253, 216, 53, 0.3);
        }

        .btn i {
            font-size: 1.2rem;
        }

        /* === GIFTS SECTION === */
        #gifts {
            background: rgba(255, 253, 231, 0.7);
            border-radius: 25px;
            margin: 20px auto;
            padding: 30px 15px;
        }

        .section-title {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            color: var(--primary);
            text-align: center;
            margin-bottom: 20px;
        }

        .gifts-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 25px;
        }

        @media (min-width: 768px) {
            .gifts-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
        }

        @media (min-width: 1024px) {
            .gifts-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .gift-card {
            background: var(--glass);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .gift-card:active {
            transform: scale(0.98);
        }

        .gift-card:hover {
            border-color: var(--primary);
            box-shadow: 0 10px 25px rgba(183, 28, 28, 0.15);
        }

        .gift-icon {
            font-size: 2.5rem;
            color: var(--accent);
            margin-bottom: 15px;
        }

        .gift-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .gift-status {
            font-size: 0.9rem;
            color: var(--dark);
            opacity: 0.8;
        }

        /* === GAMES SECTION === */
        #games {
            padding-top: 30px;
        }

        .games-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            max-width: 600px;
            margin: 25px auto;
        }

        @media (min-width: 768px) {
            .games-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
        }

        .game-btn {
            background: var(--glass);
            border: 2px solid var(--primary);
            border-radius: 12px;
            padding: 18px 15px;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--dark);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            min-height: 60px;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .game-btn:active {
            transform: scale(0.98);
            background: var(--primary);
            color: white;
        }

        .game-btn:active i {
            color: white;
        }

        .game-btn i {
            color: var(--primary);
            font-size: 1.2rem;
        }

        /* === MODALS === */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 15px;
            opacity: 0;
            transition: opacity 0.3s ease;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 25px;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            animation: fadeIn 0.5s ease-out;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            -webkit-overflow-scrolling: touch;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.8rem;
            color: var(--primary);
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
            z-index: 10;
            -webkit-tap-highlight-color: transparent;
        }

        .close-modal:active {
            transform: rotate(90deg) scale(0.9);
            background: rgba(183, 28, 28, 0.1);
        }

        /* === TOUCH MODAL === */
        .touch-content {
            text-align: center;
            padding: 20px;
        }

        .heart-animation {
            font-size: 3rem;
            color: var(--accent);
            margin-bottom: 20px;
            animation: heartbeat 1.5s infinite;
        }

        .nickname {
            font-family: 'Dancing Script', cursive;
            font-size: 2.2rem;
            color: var(--primary);
            margin: 15px 0;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wish {
            font-size: 1.1rem;
            margin: 10px 0;
            line-height: 1.5;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* === GAME MODAL === */
        .game-modal-content {
            max-width: 550px;
            padding: 20px;
        }

        .game-header {
            display: flex;
            justify-content: space-around;
            background: linear-gradient(to right, var(--primary), var(--accent));
            color: white;
            padding: 12px 10px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .game-area {
            width: 100%;
            height: 280px;
            background: var(--light);
            border: 3px dashed var(--accent);
            border-radius: 10px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
            touch-action: none;
        }

        .game-message {
            text-align: center;
            font-size: 1.1rem;
            color: var(--primary);
            margin: 15px 0;
            font-weight: 600;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        /* === GAME ELEMENTS === */
        .clickable {
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
        }

        .floating-heart {
            position: absolute;
            font-size: 2rem;
            color: var(--accent);
            animation: float 3s infinite ease-in-out;
            z-index: 2;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }

        .balloon {
            position: absolute;
            font-size: 2rem;
            color: var(--primary);
            animation: float 5s linear infinite;
            bottom: -30px;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            padding: 15px;
            height: 100%;
            align-content: center;
        }

        .card {
            height: 70px;
            background: var(--primary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }

        .card-front {
            background: linear-gradient(45deg, var(--primary), var(--accent));
            font-size: 1.8rem;
        }

        .card-back {
            background: var(--secondary);
            color: var(--dark);
            transform: rotateY(180deg);
            font-size: 1.1rem;
            padding: 5px;
            text-align: center;
        }

        /* === FOOTER === */
        footer {
            background: linear-gradient(to right, var(--primary), #7f0000);
            color: white;
            text-align: center;
            padding: 30px 15px;
            margin-top: 40px;
        }

        .footer-heart {
            font-size: 2rem;
            color: var(--secondary);
            margin: 15px 0;
            animation: heartbeat 2s infinite;
        }

        /* === CONFETTI === */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .confetti {
            position: absolute;
            width: 12px;
            height: 12px;
            animation: confetti 3s linear forwards;
            opacity: 0;
        }

        /* === SCROLL DOWN === */
        .scroll-down {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--primary);
            font-size: 2rem;
            animation: float 2s infinite ease-in-out;
            cursor: pointer;
            background: none;
            border: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* === RESPONSIVE FIXES === */
        @media (max-width: 480px) {
            .main-title {
                font-size: 2.5rem;
            }
            
            .profile-img {
                width: 150px;
                height: 150px;
            }
            
            .profile-img::before {
                font-size: 60px;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .btn {
                padding: 14px 20px;
                font-size: 0.95rem;
            }
            
            .gift-card {
                padding: 15px;
                min-height: 180px;
            }
            
            .game-area {
                height: 250px;
            }
            
            .card {
                height: 65px;
                font-size: 1.1rem;
            }
            
            .card-front {
                font-size: 1.5rem;
            }
            
            .modal-content {
                padding: 20px 15px;
            }
        }

        @media (orientation: landscape) and (max-height: 600px) {
            #hero {
                min-height: auto;
                padding: 10px 0;
            }
            
            .profile-img {
                width: 120px;
                height: 120px;
                margin-bottom: 15px;
            }
            
            .main-title {
                font-size: 2rem;
                margin-bottom: 5px;
            }
            
            .message-box {
                margin: 10px auto;
                padding: 15px;
            }
            
            .btn-group {
                margin-top: 15px;
            }
        }

        /* === TOUCH FEEDBACK === */
        .touch-feedback {
            animation: pulse 0.2s ease;
        }

        /* === LOADING STATE === */
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <!-- Confetti Container -->
    <div id="confettiContainer" class="confetti-container"></div>

    <!-- Background Elements -->
    <i class="fas fa-heart bg-element" style="top:10%; left:5%; animation-delay:0s;"></i>
    <i class="fas fa-star bg-element" style="top:20%; right:8%; animation-delay:1s;"></i>
    <i class="fas fa-gift bg-element" style="top:60%; left:8%; animation-delay:2s;"></i>
    <i class="fas fa-music bg-element" style="top:40%; right:5%; animation-delay:3s;"></i>

    <!-- Main Content -->
    <main class="container">
        <!-- Hero Section -->
        <section id="hero">
            <div class="profile-img" onclick="scrollToSection('gifts')"></div>
            <h1 class="main-title">Happy Birthday Arooj!</h1>
            <h2 class="subtitle">My Love, My Life, My Everything</h2>
            
            <div class="message-box">
                <p>To the woman who makes my world complete. Today is all about celebrating the amazing person you are.</p>
                <p style="color: var(--accent); margin-top: 10px; font-style: italic;">
                    ÿØŸÜ€åÿß ⁄©€å ÿ≥ÿ® ÿ≥€í Ÿæ€åÿßÿ±€å ŸÑ⁄ë⁄©€å ⁄©€í ŸÑ€å€íÿå ÿ¨ÿ≥ ⁄©€í ÿ¢ŸÜ€í ÿ≥€í ŸÖ€åÿ±€å ÿ≤ŸÜÿØ⁄Ø€å ŸÖ€å⁄∫ ÿ±ŸÜ⁄Ø ÿ®⁄æÿ± ⁄Øÿ¶€í €Å€å⁄∫€î
                </p>
            </div>

            <div class="btn-group">
                <button id="openLetterBtn" class="btn btn-primary" onclick="openLetterModal()">
                    <i class="fas fa-envelope-open-text"></i> Open My Love Letter
                </button>
                <button id="touchMeBtn" class="btn btn-secondary" onclick="openTouchModal()">
                    <i class="fas fa-hand-pointer"></i> Touch Me For A Surprise üòã
                </button>
            </div>

            <button class="scroll-down" onclick="scrollToSection('gifts')">
                <i class="fas fa-chevron-down"></i>
            </button>
        </section>

        <!-- Gifts Section -->
        <section id="gifts">
            <h2 class="section-title">Your Birthday Treasures</h2>
            <p style="text-align: center; margin-bottom: 20px; color: var(--dark);">
                Some are unlocked, others are waiting for you to play!
            </p>
            
            <div class="gifts-grid" id="giftsGrid">
                <!-- Gift cards will be generated here -->
            </div>
        </section>

        <!-- Games Section -->
        <section id="games">
            <h2 class="section-title">Unlock Your Next Surprise!</h2>
            <p style="text-align: center; margin-bottom: 20px; color: var(--dark);">
                Choose a category and play a fun game to reveal your next gift.
            </p>
            
            <div class="games-grid">
                <button class="game-btn" onclick="selectGame('songs')">
                    <i class="fas fa-music"></i> Unlock a Song
                </button>
                <button class="game-btn" onclick="selectGame('reasons')">
                    <i class="fas fa-heart"></i> See Why I Love You
                </button>
                <button class="game-btn" onclick="selectGame('memories')">
                    <i class="fas fa-camera"></i> View a Memory
                </button>
                <button class="game-btn" onclick="selectGame('future')">
                    <i class="fas fa-crystal-ball"></i> See Our Future
                </button>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <p style="font-size: 1.1rem;">Created with infinite love and devotion</p>
        <div class="footer-heart">üíñ</div>
        <p style="font-family: 'Dancing Script', cursive; font-size: 1.8rem;">Your Abrar</p>
        <p style="margin-top: 10px; font-size: 1rem;">ÿ™€åÿ±ÿß ÿßÿ®ÿ±ÿßÿ± üíù</p>
        <p class="countdown" style="margin-top: 15px; font-size: 0.9rem; opacity: 0.9;">See you in February 2026, my love</p>
    </footer>

    <!-- Modals -->
    <!-- Love Letter Modal -->
    <div id="letterModal" class="modal-overlay" onclick="closeModal(event, 'letterModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="close-modal" onclick="closeModal(event, 'letterModal')">&times;</span>
            <h2 style="color: var(--primary); font-family: 'Dancing Script', cursive; font-size: 2.2rem; margin-bottom: 15px;">
                My Heart's Song
            </h2>
            <div style="padding: 15px; line-height: 1.6; font-size: 1rem;">
                <p>My Dearest Arooj,</p>
                <br>
                <p>On this special day, I want to remind you how incredibly precious you are to me. Every moment with you feels like a beautiful dream I never want to wake up from. You are my strength, my joy, and my greatest adventure.</p>
                <br>
                <p style="color: var(--accent); font-weight: 600;">
                    ŸÖ€åÿ±€å Ÿæ€åÿßÿ±€å ÿπÿ±Ÿàÿ¨ÿå ÿ™ŸÖ ŸÖ€åÿ±€å ÿ≤ŸÜÿØ⁄Ø€å ⁄©ÿß ÿ≥ÿ® ÿ≥€í ÿ≠ÿ≥€åŸÜ ÿ™ÿ≠ŸÅ€Å €ÅŸà€î ÿ™ŸÖ€Åÿßÿ±€å ŸÖÿ≥⁄©ÿ±ÿß€ÅŸπ ŸÖ€åÿ±€å ÿØŸÜ€åÿß ÿ±Ÿàÿ¥ŸÜ ⁄©ÿ±ÿ™€å €Å€í€î
                </p>
                <br>
                <p>Happy Birthday, my love. I promise to make this year and every year after, filled with endless love and laughter.</p>
                <div style="text-align: right; margin-top: 25px; font-family: 'Dancing Script', cursive; font-size: 1.5rem; color: var(--primary);">
                    Forever yours,<br>
                    Abrar üíñ
                </div>
            </div>
        </div>
    </div>

    <!-- Touch Me Modal -->
    <div id="touchModal" class="modal-overlay" onclick="closeModal(event, 'touchModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="close-modal" onclick="closeModal(event, 'touchModal')">&times;</span>
            <div class="touch-content">
                <div class="heart-animation">
                    <i class="fas fa-heart"></i>
                </div>
                <div class="nickname" id="nicknameReveal">Touch the button below!</div>
                <div class="wish" id="wishReveal">Get a surprise nickname and wish</div>
                <div class="wish" id="urduWishReveal" style="color: var(--accent); font-style: italic;"></div>
                <button class="btn btn-primary" style="margin-top: 20px; min-width: 200px;" onclick="triggerTouchInteraction(event)">
                    <i class="fas fa-redo"></i> Give Me A Surprise!
                </button>
            </div>
        </div>
    </div>

    <!-- Gift Details Modal -->
    <div id="detailsModal" class="modal-overlay" onclick="closeModal(event, 'detailsModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="close-modal" onclick="closeModal(event, 'detailsModal')">&times;</span>
            <h2 id="detailsModalTitle" style="color: var(--primary); font-family: 'Dancing Script', cursive; font-size: 2rem; margin-bottom: 10px;">
                Gift Details
            </h2>
            <p id="detailsModalSubtitle" style="color: var(--accent); margin-bottom: 15px; font-size: 0.95rem;"></p>
            <div style="max-height: 50vh; overflow-y: auto; padding-right: 5px;">
                <ul id="detailsModalList" class="gift-list" style="list-style: none;">
                    <!-- Gift items will be generated here -->
                </ul>
            </div>
        </div>
    </div>

    <!-- Game Modal -->
    <div id="gameModal" class="modal-overlay" onclick="closeModal(event, 'gameModal')">
        <div class="modal-content game-modal-content" onclick="event.stopPropagation()">
            <span class="close-modal" onclick="closeModal(event, 'gameModal')">&times;</span>
            <h2 id="gameModalTitle" style="color: var(--primary); font-family: 'Dancing Script', cursive; font-size: 2rem; margin-bottom: 15px;">
                Game Title
            </h2>
            
            <div class="game-header">
                <span id="gameTimer">Time: 0s</span>
                <span id="gameScore">Score: 0</span>
                <span id="gameGoal">Goal: 0</span>
            </div>
            
            <div id="gameArea" class="game-area">
                <!-- Game content will be generated here -->
            </div>
            
            <div class="game-message" id="gameMessage">Ready to play?</div>
            
            <div class="game-controls">
                <button id="startGameBtn" class="btn btn-primary" onclick="startGame()">
                    <i class="fas fa-play"></i> Start Game
                </button>
                <button id="nextGameBtn" class="btn btn-secondary" style="display: none;" onclick="resetGame()">
                    <i class="fas fa-redo"></i> Try Again
                </button>
                <button id="continueBtn" class="btn btn-primary" style="display: none;" onclick="closeModal(event, 'gameModal')">
                    <i class="fas fa-gift"></i> Continue
                </button>
            </div>
        </div>
    </div>

    <script>
        // ===== MOBILE TOUCH FIXES =====
        
        // Prevent unwanted behaviors
        document.addEventListener('touchstart', function(e) {
            // Prevent double-tap zoom
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });
        
        document.addEventListener('touchend', function(e) {
            // Prevent context menu on long press
            e.preventDefault();
        }, { passive: false });
        
        // Prevent pull-to-refresh on iOS
        document.addEventListener('touchmove', function(e) {
            if (e.scale !== 1) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // Add touch feedback to all interactive elements
        document.addEventListener('touchstart', function(e) {
            if (e.target.classList.contains('btn') || 
                e.target.classList.contains('game-btn') || 
                e.target.classList.contains('gift-card') ||
                e.target.closest('.btn') ||
                e.target.closest('.game-btn') ||
                e.target.closest('.gift-card')) {
                e.target.classList.add('touch-feedback');
            }
        });
        
        document.addEventListener('touchend', function(e) {
            document.querySelectorAll('.touch-feedback').forEach(el => {
                el.classList.remove('touch-feedback');
            });
        });

        // ===== DATA =====
        const giftData = {
            songs: [
                {title: "Melody of Your Smile üòä", desc: "Our first song that defined our beginning."},
                {title: "My Jind's Anthem üé∂", desc: "The song I play when I need my dose of happiness."},
                {title: "Lifi's Lullaby üò¥", desc: "For those late-night drives and quiet moments."},
                {title: "The Hotto's Beat üíÉ", desc: "The one we danced to non-stop."},
                {title: "Symphony of the Future üöÄ", desc: "A song about our dreams."},
                {title: "The Begam's Choice üë∏", desc: "Your favorite on repeat."},
                {title: "Rainy Day Rhythm üåßÔ∏è", desc: "The perfect soundtrack for a chai date."},
                {title: "My Safe Place Song üè°", desc: "It always reminds me of home with you."},
                {title: "Arooj's Serenade üåπ", desc: "It feels like it was written just for you."},
                {title: "Midnight Melody üåô", desc: "For whispered secrets and stolen kisses."},
                {title: "The Happy Song üòÅ", desc: "Because you make me the happiest man."},
                {title: "Our Forever Tune üíç", desc: "The one we'll have at our wedding."},
            ],
            reasons: [
                {title: "Your Killer Smile üòÑ", text: "It brightens my darkest days."},
                {title: "Your Kind Heart üíñ", text: "The way you care for everyone is inspiring."},
                {title: "Your Sense of Humor üòÇ", text: "You always make me laugh, even when I'm grumpy."},
                {title: "Your Intelligence üß†", text: "I love talking to you about everything."},
                {title: "Your Patience üòá", text: "The endless patience you show me."},
                {title: "Your Style üíÖ", text: "You always look effortlessly beautiful."},
                {title: "Your Voice üó£Ô∏è", text: "The sweetest sound I know."},
                {title: "Your Touch ‚ú®", text: "It instantly calms my soul."},
                {title: "Your Loyalty ü§û", text: "I know you'll always have my back."},
                {title: "Your Cooking üòã", text: "I'll never get tired of your food."},
                {title: "Your Passion üî•", text: "The energy you put into everything you do."},
                {title: "Simply Being You üëë", text: "Because you are my Arooj, and that's enough."},
            ],
            memories: [
                {caption: "Our first coffee date and those endless talks. ‚òï"},
                {caption: "The day we got caught in the rain but didn't care. üåßÔ∏è"},
                {caption: "The trip where we saw the sunset together. üåÖ"},
                {caption: "That time we accidentally wore matching outfits. üëØ"},
                {caption: "The moment I knew I wanted to spend my life with you. üíç"},
                {caption: "Our home movie night with way too much popcorn. üçø"},
                {caption: "Our first birthday celebration together. üéÇ"},
                {caption: "The day we adopted our first plant/pet (future memory). üåø"},
                {caption: "That perfect Eid/Festival moment with family. üåô"},
                {caption: "The day we learned to make your favorite dish. üç≤"},
                {caption: "A walk we took where we shared our biggest secrets. ü§´"},
                {caption: "The spontaneous trip that was pure magic. üí´"},
            ],
            future: [
                {caption: "The view from our balcony in our new home. üè°"},
                {caption: "Watching our kids play in the garden. üë®‚Äçüë©‚Äçüëß‚Äçüë¶"},
                {caption: "Celebrating our 25th anniversary on a cruise. üõ≥Ô∏è"},
                {caption: "Learning a new hobby together, like pottery. üè∫"},
                {caption: "Travelling the world, one beautiful city at a time. üåç"},
                {caption: "Growing old together, still holding hands. üëµüë¥"},
                {caption: "Your big achievement/promotion celebration! üéâ"},
                {caption: "A cozy winter evening by the fireplace. üî•"},
                {caption: "Our annual trip back to our favorite spot. üèûÔ∏è"},
                {caption: "A photo of us having chai together, still laughing. ‚òï"},
                {caption: "Watching the sun rise on a perfect morning. ‚òÄÔ∏è"},
                {caption: "The moment we finally fulfill that one big shared dream. üåü"},
            ]
        };

        const nicknames = ["My Wyfo", "My Jind", "My Baggo", "My Kuggi", "My Begam", "My Jaan", "My Hotto", "My Lifi"];
        const birthdayWishes = [
            "May your day be as sunny as your smile...",
            "I'm so excited to celebrate another year of you...",
            "Happy birthday to the woman who stole my heart...",
            "Every day with you is a gift, but today is extra special...",
            "You are my everything, today and always...",
            "Wishing you a birthday that's just as wonderful as you are!",
            "To my favorite person in the world...",
            "My life got brighter the moment you walked into it...",
            "May all your birthday wishes come true...",
            "Celebrating the amazing woman you are today!",
            "I love you more than words can say...",
            "Here's to another year of laughing together..."
        ];
        
        const urduWishes = [
            "ÿ™ŸÖ€Åÿßÿ±€å ÿ≥ÿßŸÑ⁄Øÿ±€Å Ÿæÿ± ⁄à⁄æ€åÿ± ÿ≥ÿßÿ±€å ÿÆŸàÿ¥€åÿß⁄∫ ÿßŸàÿ± Ÿæ€åÿßÿ±€î",
            "ŸÖ€åÿ±€å ÿØÿπÿß €Å€í ⁄©€Å ÿ™ŸÖ €ÅŸÖ€åÿ¥€Å ŸÖÿ≥⁄©ÿ±ÿßÿ™€å ÿ±€ÅŸà€î",
            "ÿ™ŸÖ ŸÖ€åÿ±€å ÿ≤ŸÜÿØ⁄Ø€å ⁄©€å ÿ≥ÿ® ÿ≥€í ÿÆŸàÿ®ÿµŸàÿ±ÿ™ ÿ≠ŸÇ€åŸÇÿ™ €ÅŸà€î",
            "ÿ¢ÿ¨ ⁄©ÿß ÿØŸÜ ÿ™ŸÖ€Åÿßÿ±€í ŸÑ€å€í ÿ®€Åÿ™ ÿÆÿßÿµ €ÅŸàÿå ŸÖ€åÿ±€å ÿ¨ÿßŸÜ€î",
            "ÿ™ŸÖ€Åÿßÿ±€í €ÅŸàŸÜ€í ÿ≥€í ŸÖ€åÿ±€å ÿØŸÜ€åÿß ŸÖ⁄©ŸÖŸÑ €Å€í€î",
            "ÿßŸÑŸÑ€Å ÿ™ŸÖ€Å€å⁄∫ €ÅŸÖ€åÿ¥€Å ÿÆŸàÿ¥ ÿ±⁄©⁄æ€í ÿßŸàÿ± ŸÑŸÖÿ®€å ÿπŸÖÿ± ÿØ€í€î",
            "ŸÖ€åÿ±€å ÿ≤ŸÜÿØ⁄Ø€å ŸÖ€å⁄∫ ÿ¢ŸÜ€í ⁄©ÿß ÿ¥⁄©ÿ±€å€Åÿå €Å€åŸæ€å ÿ®ÿ±ÿ™⁄æ ⁄à€í!",
            "ÿ™ŸÖ€Åÿßÿ±€í ÿ¨€åÿ≥ÿß ⁄©Ÿàÿ¶€å ŸÜ€Å€å⁄∫ÿå ÿßŸàÿ± ŸÜ€Å ⁄©ÿ®⁄æ€å €ÅŸà⁄Øÿß€î",
            "ŸÖ€åÿ±€å €Åÿ± ÿÆŸàÿ¥€å ÿ™ŸÖ ÿ≥€í ÿ¨⁄ë€å €Å€í€î",
            "ÿ¢ÿ¨ ÿ™ŸÖ€Åÿßÿ±ÿß ÿØŸÜ €Å€íÿå ÿÆŸàÿ® ÿßŸÜÿ¨Ÿàÿßÿ¶€í ⁄©ÿ±Ÿà!",
            "ÿ™ŸÖ ŸÖ€åÿ±€å ÿ±ÿßŸÜ€å €ÅŸàÿå ÿßŸàÿ± ÿ¢ÿ¨ ÿ™ŸÖ€Åÿßÿ±ÿß ÿ¨ÿ¥ŸÜ €Å€í€î",
            "€ÅŸÖ€åÿ¥€Å ÿß€åÿ≥€í €Å€å ⁄ÜŸÖ⁄©ÿ™€å ÿ±€ÅŸà ŸÖ€åÿ±€å ÿ¨ÿßŸÜ€î"
        ];

        // ===== STATE MANAGEMENT =====
        const storageKey = 'aroojBirthday2025Mobile';
        let userProgress = {
            unlockedSongs: Array(12).fill(false),
            unlockedReasons: Array(12).fill(false),
            unlockedMemories: Array(12).fill(false),
            unlockedFuture: Array(12).fill(false),
            gamesPlayed: 0
        };

        let currentGame = {
            type: null,
            gameId: 0,
            timer: 0,
            score: 0,
            goal: 0,
            interval: null,
            heartInterval: null,
            balloonInterval: null,
            cards: [],
            flippedCards: [],
            matchedPairs: 0
        };

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Mobile-optimized website loaded!");
            
            // Load saved progress
            loadProgress();
            
            // Ensure first items are unlocked for new users
            if (!localStorage.getItem(storageKey)) {
                userProgress.unlockedSongs[0] = true;
                userProgress.unlockedReasons[0] = true;
                saveProgress();
            }
            
            // Render initial content
            renderGiftsGrid();
            
            // Add touch event listeners
            setupTouchEvents();
            
            // Fix iOS 100vh issue
            fixIosHeight();
            
            console.log("Initialization complete!");
        });

        function loadProgress() {
            const saved = localStorage.getItem(storageKey);
            if (saved) {
                try {
                    userProgress = JSON.parse(saved);
                } catch (e) {
                    console.error("Error loading progress:", e);
                }
            }
        }

        function saveProgress() {
            try {
                localStorage.setItem(storageKey, JSON.stringify(userProgress));
            } catch (e) {
                console.error("Error saving progress:", e);
            }
        }

        // ===== TOUCH EVENT SETUP =====
        function setupTouchEvents() {
            // Add touch event listeners to all interactive elements
            document.querySelectorAll('.btn, .game-btn, .gift-card, .close-modal').forEach(element => {
                element.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    this.style.transform = 'scale(0.96)';
                    this.style.opacity = '0.9';
                }, { passive: false });
                
                element.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    this.style.transform = '';
                    this.style.opacity = '';
                }, { passive: false });
                
                element.addEventListener('touchcancel', function() {
                    this.style.transform = '';
                    this.style.opacity = '';
                });
            });
        }

        // ===== MODAL FUNCTIONS =====
        function openLetterModal() {
            const modal = document.getElementById('letterModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function openTouchModal() {
            const modal = document.getElementById('touchModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            triggerTouchInteraction();
        }

        function closeModal(event, modalId) {
            event.preventDefault();
            event.stopPropagation();
            
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
            }
            document.body.style.overflow = '';
            
            // Clear any game intervals
            if (currentGame.interval) {
                clearInterval(currentGame.interval);
                currentGame.interval = null;
            }
            if (currentGame.heartInterval) {
                clearInterval(currentGame.heartInterval);
                currentGame.heartInterval = null;
            }
            if (currentGame.balloonInterval) {
                clearInterval(currentGame.balloonInterval);
                currentGame.balloonInterval = null;
            }
        }

        // ===== TOUCH ME INTERACTION =====
        function triggerTouchInteraction(event) {
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            const randomNick = nicknames[Math.floor(Math.random() * nicknames.length)];
            const randomWish = birthdayWishes[Math.floor(Math.random() * birthdayWishes.length)];
            const randomUrdu = urduWishes[Math.floor(Math.random() * urduWishes.length)];

            document.getElementById('nicknameReveal').textContent = randomNick;
            document.getElementById('wishReveal').textContent = randomWish;
            document.getElementById('urduWishReveal').textContent = randomUrdu;
            
            createConfetti();
            
            // Add haptic feedback if available
            if (navigator.vibrate) {
                navigator.vibrate(50);
            }
        }

        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            container.innerHTML = '';
            
            const colors = ['#b71c1c', '#fdd835', '#d81b60', '#4CAF50', '#2196F3'];
            
            for (let i = 0; i < 40; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 10 + 8 + 'px';
                confetti.style.height = Math.random() > 0.5 ? confetti.style.width : Math.random() * 8 + 4 + 'px';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                confetti.style.animationDuration = Math.random() * 2 + 1.5 + 's';
                
                container.appendChild(confetti);
            }
            
            setTimeout(() => {
                container.innerHTML = '';
            }, 3000);
        }

        // ===== GIFT MANAGEMENT =====
        function renderGiftsGrid() {
            const grid = document.getElementById('giftsGrid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            const categories = [
                { type: 'songs', title: '12 Songs For You üéµ', icon: 'fa-music' },
                { type: 'reasons', title: '12 Reasons I Love You üíñ', icon: 'fa-heart' },
                { type: 'memories', title: '12 Precious Memories üì∏', icon: 'fa-camera' },
                { type: 'future', title: '12 Future Glimpses üîÆ', icon: 'fa-crystal-ball' }
            ];
            
            categories.forEach(category => {
                const unlocked = userProgress['unlocked' + category.type.charAt(0).toUpperCase() + category.type.slice(1)];
                const unlockedCount = unlocked.filter(Boolean).length;
                const totalCount = unlocked.length;
                const progress = (unlockedCount / totalCount) * 100;
                const isLocked = unlockedCount === 0;
                
                const card = document.createElement('div');
                card.className = `gift-card ${isLocked ? 'locked' : ''}`;
                card.innerHTML = `
                    <div class="gift-icon">
                        <i class="fas ${category.icon}"></i>
                    </div>
                    <h3 class="gift-title">${category.title}</h3>
                    <div class="gift-status">
                        ${isLocked ? 'Play game to unlock' : `${unlockedCount}/${totalCount} unlocked`}
                    </div>
                    <div class="progress-bar" style="width: 100%; height: 4px; background: rgba(0,0,0,0.1); border-radius: 2px; margin-top: 10px; overflow: hidden;">
                        <div class="progress-fill" style="width: ${progress}%; height: 100%; background: linear-gradient(to right, var(--primary), var(--accent)); transition: width 0.5s ease;"></div>
                    </div>
                `;
                
                // Add both click and touch events
                card.addEventListener('click', (e) => {
                    e.preventDefault();
                    showGiftDetails(category.type);
                });
                
                card.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    card.style.transform = 'scale(0.98)';
                });
                
                card.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    card.style.transform = '';
                    showGiftDetails(category.type);
                });
                
                grid.appendChild(card);
            });
        }

        function showGiftDetails(type) {
            const data = giftData[type];
            const unlocked = userProgress['unlocked' + type.charAt(0).toUpperCase() + type.slice(1)];
            const unlockedCount = unlocked.filter(Boolean).length;
            
            // Update modal title
            const titles = {
                songs: 'Songs For You',
                reasons: 'Reasons I Love You',
                memories: 'Precious Memories',
                future: 'Future Glimpses'
            };
            
            document.getElementById('detailsModalTitle').textContent = titles[type];
            document.getElementById('detailsModalSubtitle').textContent = `Unlocked: ${unlockedCount}/12`;
            
            // Populate gift list
            const list = document.getElementById('detailsModalList');
            list.innerHTML = '';
            
            data.forEach((item, index) => {
                const isUnlocked = unlocked[index];
                const li = document.createElement('li');
                li.className = `gift-item ${isUnlocked ? '' : 'locked'}`;
                li.style.padding = '12px';
                li.style.borderBottom = '1px solid rgba(0,0,0,0.1)';
                li.style.display = 'flex';
                li.style.justifyContent = 'space-between';
                li.style.alignItems = 'center';
                
                let content = '';
                if (type === 'songs') {
                    content = `
                        <div>
                            <h4 style="color: var(--primary); margin-bottom: 5px; font-size: 1.1rem;">${isUnlocked ? item.title : 'Song ' + (index + 1) + ' Locked'}</h4>
                            <p style="color: var(--dark); opacity: 0.8; font-size: 0.9rem;">${isUnlocked ? item.desc : 'Play a game to unlock!'}</p>
                        </div>
                    `;
                } else if (type === 'reasons') {
                    content = `
                        <div>
                            <h4 style="color: var(--primary); margin-bottom: 5px; font-size: 1.1rem;">${isUnlocked ? item.title : 'Reason ' + (index + 1) + ' Locked'}</h4>
                            <p style="color: var(--dark); opacity: 0.8; font-size: 0.9rem;">${isUnlocked ? item.text : 'Play a game to unlock!'}</p>
                        </div>
                    `;
                } else {
                    content = `
                        <div>
                            <h4 style="color: var(--primary); margin-bottom: 5px; font-size: 1.1rem;">${isUnlocked ? item.caption : titles[type] + ' ' + (index + 1) + ' Locked'}</h4>
                        </div>
                    `;
                }
                
                li.innerHTML = `
                    ${content}
                    <div>
                        ${isUnlocked ? 
                            '<i class="fas fa-check" style="color: #4CAF50; font-size: 1.2rem;"></i>' : 
                            '<button class="unlock-btn" onclick="handleUnlockRequest(\'' + type + '\')" style="padding: 6px 12px; background: var(--primary); color: white; border: none; border-radius: 15px; font-size: 0.85rem; cursor: pointer;">Unlock</button>'
                        }
                    </div>
                `;
                
                // Add touch events to unlock button
                const unlockBtn = li.querySelector('.unlock-btn');
                if (unlockBtn) {
                    unlockBtn.addEventListener('touchstart', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        this.style.transform = 'scale(0.95)';
                    });
                    
                    unlockBtn.addEventListener('touchend', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        this.style.transform = '';
                        handleUnlockRequest(type);
                    });
                }
                
                list.appendChild(li);
            });
            
            // Open modal
            const modal = document.getElementById('detailsModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function handleUnlockRequest(type) {
            const modal = document.getElementById('detailsModal');
            modal.classList.remove('active');
            selectGame(type);
        }

        // ===== GAME SYSTEM =====
        function selectGame(giftType) {
            currentGame.type = giftType;
            currentGame.gameId = Math.floor(Math.random() * 4) + 1;
            currentGame.score = 0;
            currentGame.timer = 20;
            
            // Update modal UI
            const gameTitles = [
                "Catch My Hearts ‚ù§Ô∏è",
                "Pop The Balloons üéà",
                "Find The Name üîç",
                "Match The Pairs üß†"
            ];
            
            document.getElementById('gameModalTitle').textContent = gameTitles[currentGame.gameId - 1];
            
            // Set goals based on game
            if (currentGame.gameId === 1 || currentGame.gameId === 2) {
                currentGame.goal = currentGame.gameId === 1 ? 7 : 10;
                document.getElementById('gameGoal').textContent = `Goal: ${currentGame.goal}`;
                document.getElementById('gameTimer').textContent = `Time: ${currentGame.timer}s`;
            } else {
                currentGame.goal = currentGame.gameId === 3 ? 1 : 3;
                document.getElementById('gameGoal').textContent = currentGame.gameId === 3 ? 'Goal: Find Arooj' : `Goal: ${currentGame.goal} pairs`;
                document.getElementById('gameTimer').textContent = 'Time: Unlimited';
            }
            
            document.getElementById('gameScore').textContent = 'Score: 0';
            document.getElementById('gameMessage').textContent = 'Ready to play?';
            document.getElementById('gameArea').innerHTML = '';
            
            // Show/hide buttons
            document.getElementById('startGameBtn').style.display = 'block';
            document.getElementById('nextGameBtn').style.display = 'none';
            document.getElementById('continueBtn').style.display = 'none';
            
            // Open modal
            const modal = document.getElementById('gameModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function startGame() {
            document.getElementById('startGameBtn').style.display = 'none';
            document.getElementById('gameMessage').textContent = 'Go!';
            currentGame.score = 0;
            
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
            gameArea.style.pointerEvents = 'auto';
            
            switch(currentGame.gameId) {
                case 1:
                    startHeartsGame(gameArea);
                    break;
                case 2:
                    startBalloonsGame(gameArea);
                    break;
                case 3:
                    startFindNameGame(gameArea);
                    break;
                case 4:
                    startMatchPairsGame(gameArea);
                    break;
            }
            
            // Start timer for timed games
            if (currentGame.gameId === 1 || currentGame.gameId === 2) {
                startTimer();
            }
        }

        function startTimer() {
            if (currentGame.interval) clearInterval(currentGame.interval);
            
            currentGame.interval = setInterval(() => {
                currentGame.timer--;
                document.getElementById('gameTimer').textContent = `Time: ${currentGame.timer}s`;
                
                if (currentGame.timer <= 0) {
                    endGame(false);
                }
            }, 1000);
        }

        function endGame(success) {
            if (currentGame.interval) {
                clearInterval(currentGame.interval);
                currentGame.interval = null;
            }
            if (currentGame.heartInterval) {
                clearInterval(currentGame.heartInterval);
                currentGame.heartInterval = null;
            }
            if (currentGame.balloonInterval) {
                clearInterval(currentGame.balloonInterval);
                currentGame.balloonInterval = null;
            }
            
            const gameArea = document.getElementById('gameArea');
            gameArea.style.pointerEvents = 'none';
            
            if (success) {
                document.getElementById('gameMessage').textContent = 'üéâ Congratulations! You won!';
                document.getElementById('continueBtn').style.display = 'block';
                unlockReward();
                createConfetti();
            } else {
                document.getElementById('gameMessage').textContent = 'üòî Time\'s up! Try again?';
                document.getElementById('nextGameBtn').style.display = 'block';
            }
        }

        function resetGame() {
            document.getElementById('nextGameBtn').style.display = 'none';
            document.getElementById('gameMessage').textContent = 'Ready to play?';
            document.getElementById('gameScore').textContent = 'Score: 0';
            document.getElementById('startGameBtn').style.display = 'block';
            currentGame.score = 0;
            
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
            gameArea.style.pointerEvents = 'none';
        }

        function unlockReward() {
            const type = currentGame.type;
            const unlockedArray = userProgress['unlocked' + type.charAt(0).toUpperCase() + type.slice(1)];
            
            // Find locked items
            const lockedIndices = [];
            unlockedArray.forEach((isUnlocked, index) => {
                if (!isUnlocked) lockedIndices.push(index);
            });
            
            if (lockedIndices.length === 0) {
                alert('üéä You\'ve unlocked everything in this category!');
                return;
            }
            
            // Randomly unlock one
            const randomIndex = lockedIndices[Math.floor(Math.random() * lockedIndices.length)];
            unlockedArray[randomIndex] = true;
            userProgress.gamesPlayed++;
            
            saveProgress();
            renderGiftsGrid();
            
            // Show what was unlocked
            const item = giftData[type][randomIndex];
            let message = '';
            
            switch(type) {
                case 'songs':
                    message = `üéµ Unlocked: ${item.title}`;
                    break;
                case 'reasons':
                    message = `üíñ Unlocked: ${item.title}`;
                    break;
                case 'memories':
                    message = `üì∏ Unlocked: ${item.caption}`;
                    break;
                case 'future':
                    message = `üîÆ Unlocked: ${item.caption}`;
                    break;
            }
            
            document.getElementById('gameMessage').innerHTML = `${message}<br>üéâ Congratulations!`;
        }

        function updateScore(points) {
            currentGame.score += points;
            document.getElementById('gameScore').textContent = `Score: ${currentGame.score}`;
            
            if (currentGame.score >= currentGame.goal) {
                endGame(true);
            }
        }

        // ===== GAME 1: CATCH MY HEARTS =====
        function startHeartsGame(container) {
            function createHeart() {
                if (container.children.length > 8) return;
                
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.innerHTML = '‚ù§Ô∏è';
                heart.style.left = Math.random() * 85 + '%';
                heart.style.top = Math.random() * 75 + '%';
                heart.style.animationDuration = Math.random() * 2 + 1 + 's';
                heart.style.fontSize = (Math.random() * 0.5 + 1.5) + 'rem';
                heart.style.color = ['#b71c1c', '#d81b60', '#f44336'][Math.floor(Math.random() * 3)];
                
                // Add both click and touch events
                const handleHeartClick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    updateScore(1);
                    this.style.opacity = '0';
                    this.style.transform = 'scale(1.5)';
                    setTimeout(() => {
                        if (this.parentNode === container) {
                            this.remove();
                        }
                    }, 200);
                };
                
                heart.addEventListener('click', handleHeartClick);
                heart.addEventListener('touchstart', handleHeartClick, { passive: false });
                
                container.appendChild(heart);
                
                setTimeout(() => {
                    if (heart.parentNode === container) {
                        heart.style.opacity = '0';
                        heart.style.transform = 'scale(0.5)';
                        setTimeout(() => heart.remove(), 300);
                    }
                }, 3000);
            }
            
            // Create initial hearts
            for (let i = 0; i < 4; i++) {
                setTimeout(() => createHeart(), i * 400);
            }
            
            // Keep creating hearts
            currentGame.heartInterval = setInterval(() => {
                if (currentGame.score < currentGame.goal) {
                    createHeart();
                } else {
                    clearInterval(currentGame.heartInterval);
                }
            }, 800);
        }

        // ===== GAME 2: POP THE BALLOONS =====
        function startBalloonsGame(container) {
            function createBalloon() {
                if (container.children.length > 6) return;
                
                const balloon = document.createElement('div');
                balloon.className = 'balloon';
                balloon.innerHTML = 'üéà';
                balloon.style.left = Math.random() * 85 + '%';
                balloon.style.animationDuration = Math.random() * 3 + 2 + 's';
                balloon.style.fontSize = (Math.random() * 0.5 + 1.5) + 'rem';
                balloon.style.color = ['#b71c1c', '#fdd835', '#d81b60', '#4CAF50', '#2196F3'][Math.floor(Math.random() * 5)];
                
                // Add both click and touch events
                const handleBalloonClick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    if (this.classList.contains('popped')) return;
                    
                    updateScore(1);
                    this.classList.add('popped');
                    this.style.opacity = '0';
                    this.style.transform = 'scale(1.5)';
                    setTimeout(() => {
                        if (this.parentNode === container) {
                            this.remove();
                        }
                    }, 200);
                };
                
                balloon.addEventListener('click', handleBalloonClick);
                balloon.addEventListener('touchstart', handleBalloonClick, { passive: false });
                
                container.appendChild(balloon);
            }
            
            // Create initial balloons
            for (let i = 0; i < 3; i++) {
                setTimeout(() => createBalloon(), i * 500);
            }
            
            // Keep creating balloons
            currentGame.balloonInterval = setInterval(() => {
                if (currentGame.score < currentGame.goal) {
                    createBalloon();
                } else {
                    clearInterval(currentGame.balloonInterval);
                }
            }, 600);
        }

        // ===== GAME 3: FIND THE NAME =====
        function startFindNameGame(container) {
            container.classList.add('card-grid');
            
            const names = ['Abrar', 'Jind', 'Hotto', 'Wyfo', 'Kuggi', 'Begam', 'Lifi', 'Jaan'];
            let cards = ['Arooj', ...names.slice(0, 8)];
            cards = cards.sort(() => Math.random() - 0.5);
            
            currentGame.cards = cards;
            currentGame.flippedCards = [];
            
            container.innerHTML = '';
            cards.forEach((name, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.index = index;
                card.dataset.name = name;
                
                card.innerHTML = `
                    <div class="card-front">?</div>
                    <div class="card-back">${name}</div>
                `;
                
                const handleCardClick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    if (this.classList.contains('flipped') || currentGame.flippedCards.length > 0) return;
                    
                    this.classList.add('flipped');
                    const name = this.dataset.name;
                    
                    if (name === 'Arooj') {
                        updateScore(1);
                    } else {
                        setTimeout(() => {
                            this.classList.remove('flipped');
                            document.getElementById('gameMessage').textContent = `Not ${name}! Try again!`;
                        }, 800);
                    }
                };
                
                card.addEventListener('click', handleCardClick);
                card.addEventListener('touchstart', handleCardClick, { passive: false });
                
                container.appendChild(card);
            });
        }

        // ===== GAME 4: MATCH THE PAIRS =====
        function startMatchPairsGame(container) {
            container.classList.add('card-grid');
            
            const symbols = ['üåπ', '‚ù§Ô∏è', 'üíç', 'ü•Ç', 'üíã', 'üëë'];
            let cards = [...symbols.slice(0, 6), ...symbols.slice(0, 6)];
            cards = cards.sort(() => Math.random() - 0.5);
            
            currentGame.cards = cards;
            currentGame.flippedCards = [];
            currentGame.matchedPairs = 0;
            
            container.innerHTML = '';
            cards.forEach((symbol, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.index = index;
                card.dataset.symbol = symbol;
                
                card.innerHTML = `
                    <div class="card-front">?</div>
                    <div class="card-back">${symbol}</div>
                `;
                
                const handleCardClick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    if (this.classList.contains('flipped') || currentGame.flippedCards.length >= 2) return;
                    
                    this.classList.add('flipped');
                    currentGame.flippedCards.push(this);
                    
                    if (currentGame.flippedCards.length === 2) {
                        const card1 = currentGame.flippedCards[0];
                        const card2 = currentGame.flippedCards[1];
                        
                        if (card1.dataset.symbol === card2.dataset.symbol) {
                            // Match found
                            currentGame.matchedPairs++;
                            currentGame.flippedCards = [];
                            
                            if (currentGame.matchedPairs >= currentGame.goal) {
                                updateScore(1);
                            }
                        } else {
                            // No match
                            setTimeout(() => {
                                card1.classList.remove('flipped');
                                card2.classList.remove('flipped');
                                currentGame.flippedCards = [];
                            }, 1000);
                        }
                    }
                };
                
                card.addEventListener('click', handleCardClick);
                card.addEventListener('touchstart', handleCardClick, { passive: false });
                
                container.appendChild(card);
            });
        }

        // ===== UTILITY FUNCTIONS =====
        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId);
            if (element) {
                element.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }

        function fixIosHeight() {
            // Fix for iOS 100vh issue
            function setVH() {
                let vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
                
                // Also fix hero section height
                const hero = document.getElementById('hero');
                if (hero) {
                    hero.style.minHeight = window.innerHeight + 'px';
                }
            }
            
            setVH();
            window.addEventListener('resize', setVH);
            window.addEventListener('orientationchange', setVH);
        }

        // ===== INITIAL RENDER =====
        // Render gifts grid on load
        setTimeout(() => {
            renderGiftsGrid();
        }, 100);

        // Log initialization
        console.log("Mobile touch events configured successfully!");
        
        // Add loading state management
        window.addEventListener('load', function() {
            console.log('Page fully loaded and ready!');
        });

    </script>
</body>
</html>